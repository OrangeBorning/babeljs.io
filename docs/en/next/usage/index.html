<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Usage Guide · Babel</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="There are quite a few tools in the Babel toolchain that try to make it easy for you to use Babel whether you&#x27;re an &quot;end-user&quot; or building an integration of Babel itself. This will be a quick introduction to those tools and you can read more about them in the &quot;Usage&quot; section of the docs."/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Usage Guide · Babel"/><meta property="og:type" content="website"/><meta property="og:url" content="https://babeljs.io/index.html"/><meta property="og:description" content="There are quite a few tools in the Babel toolchain that try to make it easy for you to use Babel whether you&#x27;re an &quot;end-user&quot; or building an integration of Babel itself. This will be a quick introduction to those tools and you can read more about them in the &quot;Usage&quot; section of the docs."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css"/><link rel="alternate" type="application/atom+xml" href="https://babeljs.io/blog/atom.xml" title="Babel Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://babeljs.io/blog/feed.xml" title="Babel Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-114990275-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://unpkg.com/clipboard@2.0.0/dist/clipboard.min.js"></script><script type="text/javascript" src="/js/code-blocks-buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/babel.svg" alt="Babel"/></a><a href="/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/en/next" target="_self">文档</a></li><li class=""><a href="/en/setup" target="_self">配置</a></li><li class=""><a href="/en/repl" target="_self">试用</a></li><li class=""><a href="/blog" target="_self">博客</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://opencollective.com/babel" target="_self">赞助</a></li><li class=""><a href="/en/team" target="_self">团队</a></li><li class=""><a href="https://github.com/babel/babel" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/next">What is Babel?</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/en/next/usage">Usage Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/configuration">Configure Babel</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/learn">Learn ES2015</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/v7-migration">Upgrade to Babel 7</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/v7-migration-api">Upgrade to Babel 7 (API)</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">General</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/next/editors">Editors</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/plugins">Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/presets">Presets</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/caveats">Caveats</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/faq">FAQ</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/roadmap">Roadmap</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Usage</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/next/babelconfigjs">babel.config.js</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babelrc">.babelrc</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-cli">babel-cli</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-polyfill">babel-polyfill</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-plugin-transform-runtime">transform-runtime</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-register">babel-register</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Presets</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-env">env</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-stage-0">stage-0</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-stage-1">stage-1</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-stage-2">stage-2</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-stage-3">stage-3</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-flow">flow</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-react">react</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-minify">minify</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-typescript">typescript</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Tooling</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-parser">babel-parser</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-core">babel-core</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-generator">babel-generator</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-code-frame">babel-code-frame</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-helpers">babel-helpers</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-runtime">babel-runtime</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-template">babel-template</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-traverse">babel-traverse</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-types">babel-types</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/babel/website/blob/master/docs/usage.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Usage Guide</h1></header><article><div><span><p>There are quite a few tools in the Babel toolchain that try to make it easy for you to use Babel whether you're an &quot;end-user&quot; or building an integration of Babel itself. This will be a quick introduction to those tools and you can read more about them in the &quot;Usage&quot; section of the docs.</p>
<blockquote>
<p>If you're using a framework, the work of configuring Babel might be different or actually already handled for you. Check out our <a href="/setup.html">interactive setup guide</a> instead.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="overview"></a><a href="#overview" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>
<p>This guide will show you how to compile your JavaScript application code that uses ES2015+ syntax into code that works in current browsers. That will involve both transforming new syntax and polyfilling missing features.</p>
<p>The entire process to set this up involves:</p>
<ol>
<li><p>Running these commands to install the packages:</p>
<pre><code class="hljs css languages- sh">npm install --save-dev @babel/core @babel/cli @babel/preset-env
npm install --save @babel/polyfill
</code></pre></li>
<li><p>Creating a config file named <code>babel.config.js</code> in the root of your project with this content:</p>
<pre><code class="hljs css languages- js"><span class="hljs-keyword">const</span> presets = [
  [<span class="hljs-string">"@babel/env"</span>, {
    <span class="hljs-attr">targets</span>: {
      <span class="hljs-attr">edge</span>: <span class="hljs-string">"17"</span>,
      <span class="hljs-attr">firefox</span>: <span class="hljs-string">"60"</span>,
      <span class="hljs-attr">chrome</span>: <span class="hljs-string">"67"</span>,
      <span class="hljs-attr">safari</span>: <span class="hljs-string">"11.1"</span>
    },
    <span class="hljs-attr">useBuiltIns</span>: <span class="hljs-string">"usage"</span>
  }]
];

<span class="hljs-built_in">module</span>.exports = { presets };
</code></pre>
<blockquote>
<p>The browsers list above is just an arbitrary example. You will have to adapt it for the browsers you want to support.</p>
</blockquote></li>
<li><p>And running this command to compile all your code from the <code>src</code> directory to <code>lib</code>:</p>
<pre><code class="hljs css languages- sh">./node_modules/.bin/babel src --out-dir lib
</code></pre>
<blockquote>
<p>You can use the npm package runner that comes with npm@5.2.0 to shorten that command by replacing <code>./node_modules/.bin/babel</code> with <code>npx babel</code></p>
</blockquote></li>
</ol>
<p>Read on for a step-by-step explanation of how this works and an introduction to each of the tools used.</p>
<h2><a class="anchor" aria-hidden="true" id="basic-usage-with-cli"></a><a href="#basic-usage-with-cli" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Basic usage with CLI</h2>
<p>All the Babel modules you'll need are published as separate npm packages scoped under <code>@babel</code> (since version 7). This modular design allows for various tools each designed for a specific use case. Here we'll look at <code>@babel/core</code> and <code>@babel/cli</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="core-library"></a><a href="#core-library" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Core Library</h3>
<p>The core functionality of Babel resides at the <a href="/docs/en/next/babel-core">@babel/core</a> module. After installing it:</p>
<pre><code class="hljs css languages- sh">npm install --save-dev @babel/core
</code></pre>
<p>you can <code>require</code> it directly in your JavaScript program and use it like this:</p>
<pre><code class="hljs css languages- js"><span class="hljs-keyword">const</span> babel = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@babel/core"</span>);

babel.transform(<span class="hljs-string">"code"</span>, optionsObject);
</code></pre>
<p>As an end-user though, you'll probably want to install other tools that serve as an interface to <code>@babel/core</code> and integrate well with your development process. Even so, you might still want to check its documentation page to learn about the options, most of which can be set from the other tools as well.</p>
<h3><a class="anchor" aria-hidden="true" id="cli-tool"></a><a href="#cli-tool" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CLI tool</h3>
<p><a href="/docs/en/next/babel-cli">@babel/cli</a> is a tool that allows you to use babel from the terminal. Here's the installation command and a basic usage example:</p>
<pre><code class="hljs css languages- sh">npm install --save-dev @babel/core @babel/cli

./node_modules/.bin/babel src --out-dir lib
</code></pre>
<p>This will parse all the JavaScript files in the <code>src</code> directory, apply any transformations we have told it to, and output each file to the <code>lib</code> directory. Since we haven't told it to apply any transformations yet, the output code will be identical to the input (exact code styling is not preserved). We can specify what transformations we want by passing them as options.</p>
<p>We used the <code>--out-dir</code> option above. You can view the rest of the options accepted by the cli tool by running it with <code>--help</code>. But the most important to us right now are <code>--plugins</code> and <code>--presets</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="plugins-presets"></a><a href="#plugins-presets" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugins &amp; Presets</h2>
<p>Transformations come in the form of plugins, which are small JavaScript programs that instruct Babel on how to carry out transformations to the code. You can even write your own plugins to apply any transformations you want to your code. To transform ES2015+ syntax into ES5 we can rely on official plugins like <code>@babel/plugin-transform-arrow-functions</code>:</p>
<pre><code class="hljs css languages- sh">npm install --save-dev @babel/plugin-transform-arrow-functions

./node_modules/.bin/babel src --out-dir lib --plugins=@babel/plugin-transform-arrow-functions
</code></pre>
<p>Now any arrow functions in our code will be transformed into ES5 compatible function expressions:</p>
<pre><code class="hljs css languages- js"><span class="hljs-keyword">const</span> fn = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">// converted to</span>

<span class="hljs-keyword">var</span> fn = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
};
</code></pre>
<p>That's a good start! But we also have other ES2015+ features in our code that we want transformed. Instead of adding all the plugins we want one by one, we can use a &quot;preset&quot; which is just a pre-determined set of plugins.</p>
<p>Just like with plugins, you can create your own presets too to share any combination of plugins you need. For our use case here, there's an excellent preset named <code>env</code>.</p>
<pre><code class="hljs css languages- sh">npm install --save-dev @babel/preset-env

./node_modules/.bin/babel src --out-dir lib --presets=@babel/env
</code></pre>
<p>Without any configuration, this preset will include all plugins to support modern JavaScript (ES2015, ES2016, etc.). But presets can take options too. Rather than passing both cli and preset options from the terminal, let's look at another way of passing options: configuration files.</p>
<h2><a class="anchor" aria-hidden="true" id="configuration"></a><a href="#configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration</h2>
<blockquote>
<p>There are a few different ways to use configuration files depending on your needs. Be sure to read our in-depth guide on how to <a href="/docs/en/next/configuration">configure Babel</a> for more information.</p>
</blockquote>
<p>For now, let's create a file called <code>babel.config.js</code> with the following content:</p>
<pre><code class="hljs css languages- js"><span class="hljs-keyword">const</span> presets = [
  [<span class="hljs-string">"@babel/env"</span>, {
    <span class="hljs-attr">targets</span>: {
      <span class="hljs-attr">edge</span>: <span class="hljs-string">"17"</span>,
      <span class="hljs-attr">firefox</span>: <span class="hljs-string">"60"</span>,
      <span class="hljs-attr">chrome</span>: <span class="hljs-string">"67"</span>,
      <span class="hljs-attr">safari</span>: <span class="hljs-string">"11.1"</span>
    }
  }]
];

<span class="hljs-built_in">module</span>.exports = { presets };
</code></pre>
<p>Now the <code>env</code> preset will only load transformation plugins for features that are not available in our target browsers. We're all set for syntax. Let's look at polyfills next.</p>
<h2><a class="anchor" aria-hidden="true" id="polyfill"></a><a href="#polyfill" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Polyfill</h2>
<p>The <a href="/docs/en/next/babel-polyfill">@babel/polyfill</a> module includes <a href="https://github.com/zloirock/core-js">core-js</a> and a custom <a href="https://github.com/facebook/regenerator/blob/master/packages/regenerator-runtime/runtime.js">regenerator runtime</a> to emulate a full ES2015+ environment.</p>
<p>This means you can use new built-ins like <code>Promise</code> or <code>WeakMap</code>, static methods like <code>Array.from</code> or <code>Object.assign</code>, instance methods like <code>Array.prototype.includes</code>, and generator functions (provided you use the <a href="https://babeljs.io/docs/plugins/transform-regenerator/">regenerator</a> plugin). The polyfill adds to the global scope as well as native prototypes like <code>String</code> in order to do this.</p>
<p>For library/tool authors this may be too much. If you don't need the instance methods like <code>Array.prototype.includes</code> you can do without polluting the global scope altogether by using the <a href="/docs/en/next/babel-plugin-transform-runtime">transform runtime</a> plugin instead of <code>@babel/polyfill</code>.</p>
<p>To go one step further, if you know exactly what features you need polyfills for, you can require them directly from <a href="https://github.com/zloirock/core-js#commonjs">core-js</a>.</p>
<p>Since we're building an application we can just install <code>@babel/polyfill</code>:</p>
<pre><code class="hljs css languages- sh">npm install --save @babel/polyfill
</code></pre>
<blockquote>
<p>Note the <code>--save</code> option instead of <code>--save-dev</code> as this is a polyfill that needs to run before your source code.</p>
</blockquote>
<p>Now luckily for us, we're using the <code>env</code> preset which has a <code>&quot;useBuiltIns&quot;</code> option that when set to <code>&quot;usage&quot;</code> will practically apply the last optimization mentioned above where you only include the polyfills you need. With this new option the configuration changes like this:</p>
<pre><code class="hljs css languages- js"><span class="hljs-keyword">const</span> presets = [
  [<span class="hljs-string">"@babel/env"</span>, {
    <span class="hljs-attr">targets</span>: {
      <span class="hljs-attr">edge</span>: <span class="hljs-string">"17"</span>,
      <span class="hljs-attr">firefox</span>: <span class="hljs-string">"60"</span>,
      <span class="hljs-attr">chrome</span>: <span class="hljs-string">"67"</span>,
      <span class="hljs-attr">safari</span>: <span class="hljs-string">"11.1"</span>
    },
    <span class="hljs-attr">useBuiltIns</span>: <span class="hljs-string">"usage"</span>
  }]
];

<span class="hljs-built_in">module</span>.exports = { presets };
</code></pre>
<p>Babel will now inspect all your code for features that are missing in your target environments and include only the required polyfills. For example this code:</p>
<pre><code class="hljs css languages- js"><span class="hljs-built_in">Promise</span>.resolve().finally()
</code></pre>
<p>would turn into this (because Edge 17 doesn't have <code>Promise.prototype.finally</code>):</p>
<pre><code class="hljs css languages- js"><span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.promise.finally"</span>);

<span class="hljs-built_in">Promise</span>.resolve().finally()
</code></pre>
<p>If we weren't using the <code>env</code> preset with the <code>&quot;useBuiltIns&quot;</code> option set to <code>&quot;usage&quot;</code> we would've had to require the full polyfill <em>only once</em> in our entry point before any other code.</p>
<h2><a class="anchor" aria-hidden="true" id="summary"></a><a href="#summary" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Summary</h2>
<p>We used <code>@babel/cli</code> to run Babel from the terminal, <code>@babel/polyfill</code> to polyfill all the new JavaScript features, and the <code>env</code> preset to only include the transformations and polyfills for the features that we use and that are missing in our target browsers.</p>
<p>For more information on setting up Babel with your build system, IDE, and more, check out our <a href="/setup.html">interactive setup guide</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/en/next/index">← What is Babel?</a><a class="docs-next button" href="/docs/en/next/configuration">Configure Babel →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#overview">Overview</a></li><li><a href="#basic-usage-with-cli">Basic usage with CLI</a><ul class="toc-headings"><li><a href="#core-library">Core Library</a></li><li><a href="#cli-tool">CLI tool</a></li></ul></li><li><a href="#plugins-presets">Plugins &amp; Presets</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#polyfill">Polyfill</a></li><li><a href="#summary">Summary</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/babel.svg" alt="Babel" width="66" height="58"/></a><div><h5>文档</h5><a href="/docs/en/learn.html">学习 ES2015</a></div><div><h5>社区</h5><a href="/en/users.html">用户</a><a href="http://stackoverflow.com/questions/tagged/babeljs" rel="noopener noreferrer" target="_blank">Stack Overflow</a><a href="https://babeljs.slack.com/">Slack 通道</a><a href="https://twitter.com/babeljs" rel="noopener noreferrer" target="_blank">Twitter</a></div><div><h5>更多</h5><a href="/blog">博客</a><a href="https://github.com/babel">GitHub Org</a><a href="https://github.com/babel/babel">GitHub Repo</a><a href="https://github.com/babel/website">Website Repo</a><a href="https://old.babeljs.io"> 旧版网址 6.x </a><a href="http://henryzoo.com/babel.github.io">旧版网址 5.x </a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: 'd42906b043c5422ea07b44fd49c40a0d',
                indexName: 'babeljs',
                inputSelector: '#search_input_react'
              });
            </script></body></html>