<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Upgrade to Babel 7 · Babel</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Refer users to this document when upgrading to Babel 7."/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Upgrade to Babel 7 · Babel"/><meta property="og:type" content="website"/><meta property="og:url" content="https://babeljs.io/index.html"/><meta property="og:description" content="Refer users to this document when upgrading to Babel 7."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css"/><link rel="alternate" type="application/atom+xml" href="https://babeljs.io/blog/atom.xml" title="Babel Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://babeljs.io/blog/feed.xml" title="Babel Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-114990275-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://unpkg.com/clipboard@2.0.0/dist/clipboard.min.js"></script><script type="text/javascript" src="/js/code-blocks-buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/babel.svg" alt="Babel"/></a><a href="/versions"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/en/next" target="_self">文档</a></li><li class=""><a href="/en/setup" target="_self">配置</a></li><li class=""><a href="/en/repl" target="_self">试用</a></li><li class=""><a href="/blog" target="_self">博客</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://opencollective.com/babel" target="_self">赞助</a></li><li class=""><a href="/en/team" target="_self">团队</a></li><li class=""><a href="https://github.com/babel/babel" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/next">What is Babel?</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/usage">Usage Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/configuration">Configure Babel</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/learn">Learn ES2015</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/en/next/v7-migration">Upgrade to Babel 7</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/v7-migration-api">Upgrade to Babel 7 (API)</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">General</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/next/editors">Editors</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/plugins">Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/presets">Presets</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/caveats">Caveats</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/faq">FAQ</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/roadmap">Roadmap</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Usage</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/next/babelconfigjs">babel.config.js</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babelrc">.babelrc</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-cli">babel-cli</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-polyfill">babel-polyfill</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-plugin-transform-runtime">transform-runtime</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-register">babel-register</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Presets</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-env">env</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-stage-0">stage-0</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-stage-1">stage-1</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-stage-2">stage-2</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-stage-3">stage-3</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-flow">flow</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-react">react</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-minify">minify</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-preset-typescript">typescript</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Tooling</h3><ul><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-parser">babel-parser</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-core">babel-core</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-generator">babel-generator</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-code-frame">babel-code-frame</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-helpers">babel-helpers</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-runtime">babel-runtime</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-template">babel-template</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-traverse">babel-traverse</a></li><li class="navListItem"><a class="navItem" href="/docs/en/next/babel-types">babel-types</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/babel/website/blob/master/docs/v7-migration.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Upgrade to Babel 7</h1></header><article><div><span><p>Refer users to this document when upgrading to Babel 7.</p>
<!--truncate-->
<p>Help edit this file <a href="https://github.com/babel/website/blob/master/docs/v7-migration.md">here</a></p>
<p>Because not every breaking change will affect every project, we've sorted the sections by the likelihood of a change breaking tests when upgrading.</p>
<h2><a class="anchor" aria-hidden="true" id="all-of-babel"></a><a href="#all-of-babel" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>All of Babel</h2>
<blockquote>
<p>Support for Node.js 0.10, 0.12, 4 and 5 has been dropped <a href="https://github.com/babel/babel/pull/5025">#5025</a>, <a href="https://github.com/babel/babel/pull/5041">#5041</a>, <a href="https://github.com/babel/babel/pull/7755">#7755</a>, <a href="https://github.com/babel/babel/pull/5186">#5186</a> <img src="https://img.shields.io/badge/level%20of%20awesomeness%3F-high-red.svg" alt="high"></p>
</blockquote>
<p>We highly encourage you to use a newer version of Node.js (LTS v8) since the previous versions are not maintained.
See <a href="https://github.com/nodejs/LTS">nodejs/LTS</a> for more information.</p>
<p>This just means Babel <em>itself</em> won't run on older versions of Node. It can still <em>output</em> code that runs on old Node.</p>
<h2><a class="anchor" aria-hidden="true" id="yearly-preset-deprecations-blog-2017-12-27-nearing-the-70-releasehtml-deprecated-yearly-presets-eg-babel-preset-es20xx"></a><a href="#yearly-preset-deprecations-blog-2017-12-27-nearing-the-70-releasehtml-deprecated-yearly-presets-eg-babel-preset-es20xx" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="/blog/2017/12/27/nearing-the-7.0-release.html#deprecated-yearly-presets-eg-babel-preset-es20xx">Yearly Preset Deprecations</a></h2>
<p>The &quot;env&quot; preset has been out for more than a year now, and completely replaces some of the presets we've had/suggested earlier.</p>
<ul>
<li><code>babel-preset-es2015</code></li>
<li><code>babel-preset-es2016</code></li>
<li><code>babel-preset-es2017</code></li>
<li><code>babel-preset-latest</code></li>
<li>A combination of the above ^</li>
</ul>
<p>These presets should be substituted with the &quot;env&quot; preset.</p>
<h2><a class="anchor" aria-hidden="true" id="versioning-dependencies-blog-2017-12-27-nearing-the-70-releasehtml-peer-dependencies-integrations"></a><a href="#versioning-dependencies-blog-2017-12-27-nearing-the-70-releasehtml-peer-dependencies-integrations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="/blog/2017/12/27/nearing-the-7.0-release.html#peer-dependencies-integrations">Versioning/Dependencies</a></h2>
<p>Most plugins/top level packages now have a <code>peerDependency</code> on <code>@babel/core</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="package-renames"></a><a href="#package-renames" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Package Renames</h2>
<p>You can still use the shorthand version of a package name (remove the <code>preset-</code> or <code>plugin-</code>) in the config, but I'm choosing to use the whole package name for clarity (maybe we should just remove that, given it doesn't save that much typing anyway).</p>
<pre><code class="hljs css languages- diff">{
<span class="hljs-deletion">-  "presets": ["@babel/preset-react"],</span>
<span class="hljs-addition">+  "presets": ["@babel/react"], // this is equivalent</span>
<span class="hljs-deletion">-  "plugins": ["@babel/transform-runtime"],</span>
<span class="hljs-addition">+  "plugins": ["@babel/plugin-transform-runtime"], // same</span>
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="scoped-packages"></a><a href="#scoped-packages" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scoped Packages</h3>
<p>The most important change is finally switching all packages to <a href="/blog/2017/12/27/nearing-the-7.0-release.html#renames-scoped-packages-babel-x">scoped packages</a>. (the folder names in the <a href="https://github.com/babel/babel/tree/master/packages">monorepo</a> are not changed but the package.name is)</p>
<p>This means there will be no more issues with accidental/intentional name squatting, a clear separation from community plugins, and a simpler naming convention.</p>
<p>Your dependencies will need to be modified like so:</p>
<p><code>babel-cli</code> -&gt; <code>@babel/cli</code>. For us, we basically started by replacing <code>babel-</code> with <code>@babel/</code>.</p>
<h4><a class="anchor" aria-hidden="true" id="use-in-the-config"></a><a href="#use-in-the-config" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use in the config</h4>
<p>You can still use the shorthand way of specifying a preset or plugin. However because of the switch to scoped packages, you still have to specify the <code>@babel/</code> just like if you had your own preset to add to the config.</p>
<pre><code class="hljs css languages- js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-string">"presets"</span>: [<span class="hljs-string">"@babel/env"</span>], <span class="hljs-comment">// "@babel/preset-env"</span>
  <span class="hljs-string">"plugins"</span>: [<span class="hljs-string">"@babel/transform-arrow-functions"</span>] <span class="hljs-comment">// same as "@babel/plugin-transform-arrow-functions"</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="switch-to-proposal-for-tc39-proposals-blog-2017-12-27-nearing-the-70-releasehtml-renames-proposal"></a><a href="#switch-to-proposal-for-tc39-proposals-blog-2017-12-27-nearing-the-70-releasehtml-renames-proposal" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="/blog/2017/12/27/nearing-the-7.0-release.html#renames-proposal">Switch to <code>-proposal-</code> for TC39 Proposals</a></h3>
<p>This means any plugin that isn't in a yearly release (ES2015, ES2016, etc) should be renamed to <code>-proposal</code>. This is so we can better signify that a proposal isn't officially in JavaScript.</p>
<p>Examples:</p>
<ul>
<li><code>@babel/plugin-transform-function-bind</code> is now <code>@babel/plugin-proposal-function-bind</code> (Stage 0)</li>
<li><code>@babel/plugin-transform-class-properties</code> is now <code>@babel/plugin-proposal-class-properties</code> (Stage 3)</li>
</ul>
<p>This also means that when a proposal moves to Stage 4, we should rename the package.</p>
<h3><a class="anchor" aria-hidden="true" id="remove-the-year-from-package-names-blog-2017-12-27-nearing-the-70-releasehtml-renames-drop-the-year-from-the-plugin-name"></a><a href="#remove-the-year-from-package-names-blog-2017-12-27-nearing-the-70-releasehtml-renames-drop-the-year-from-the-plugin-name" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="/blog/2017/12/27/nearing-the-7.0-release.html#renames-drop-the-year-from-the-plugin-name">Remove the year from package names</a></h3>
<p>Some of the plugins had <code>-es3-</code> or <code>-es2015-</code> in the names, but these were unncessary.</p>
<p><code>@babel/plugin-transform-es2015-classes</code> became <code>@babel/plugin-transform-classes</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="use-strict-and-this-in-commonjs"></a><a href="#use-strict-and-this-in-commonjs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>&quot;use strict&quot;</code> and <code>this</code> in CommonJS</h2>
<p>Babel 6's transformations for ES6 modules ran indiscriminantly on whatever files it was told to process, never taking into account if the file actually had ES6 imports/exports in them. This had the effect of rewriting file-scoped references to <code>this</code> to be <code>undefined</code> and inserting <code>&quot;use strict&quot;</code> at the top of all CommonJS modules that were processed by Babel.</p>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// input.js</span>
<span class="hljs-keyword">this</span>;
</code></pre>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// output.js v6</span>
<span class="hljs-meta">"use strict"</span>; <span class="hljs-comment">// assumed strict modules</span>
<span class="hljs-literal">undefined</span>; <span class="hljs-comment">// changed this to undefined</span>
</code></pre>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// output.js v7</span>
<span class="hljs-keyword">this</span>;
</code></pre>
<p>This behavior has been restricted in Babel 7 so that for the <code>transform-es2015-modules-commonjs</code> transform, the file is only changed if it has ES6 imports or exports in the file. (Editor's note: This may change again if we land <a href="https://github.com/babel/babel/issues/6242">https://github.com/babel/babel/issues/6242</a>, so we'll want to revisit this before publishing).</p>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// input2.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'a'</span>;
</code></pre>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// output.js v6 and v7</span>
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-built_in">require</span>(<span class="hljs-string">'a'</span>);
</code></pre>
<p>If you were relying on Babel to inject <code>&quot;use strict&quot;</code> into all of your CommonJS modules automatically, you'll want to explicitly use the <code>transform-strict-mode</code> plugin in your Babel config.</p>
<h2><a class="anchor" aria-hidden="true" id="separation-between-the-react-and-flow-presets"></a><a href="#separation-between-the-react-and-flow-presets" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Separation between the React and Flow presets</h2>
<p><code>babel-preset-react</code> has always included the flow plugin automatically from the beginning. This has actually caused a lot of issues with users that accidently use <code>flow</code> syntax without intending due to a typo, or adding it in without typechecking with <code>flow</code> itself, resulting in errors.</p>
<p>This became further of an issue after we decided to support TypeScript with the help of the TS team. If you wanted to use the react and typescript presets, we would have to figure out a way to turn on/off the syntax automatically via file type or the directive. In the end it seemed easiest to just separate the presets entirely.</p>
<p>So now the react preset and the flow preset are separated.</p>
<pre><code class="hljs css languages- diff">{
<span class="hljs-deletion">-  "presets": ["@babel/preset-react"]</span>
<span class="hljs-addition">+  "presets": ["@babel/preset-react", "@babel/preset-flow"] // remove flow types</span>
<span class="hljs-addition">+  "presets": ["@babel/preset-react", "@babel/preset-typescript"] // remove typescript types</span>
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="option-parsing"></a><a href="#option-parsing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Option parsing</h2>
<p>Babel's config options are stricter than in Babel 6.
Where a comma-separated list for presets, e.g. <code>&quot;presets&quot;: 'es2015, es2016'</code> technically worked before, it will now fail and needs to be changed to an array <a href="https://github.com/babel/babel/pull/5463">#5463</a>.</p>
<p>Note this does not apply to the CLI, where <code>--presets es2015,es2016</code> will certainly still work.</p>
<pre><code class="hljs css languages- diff">{
<span class="hljs-deletion">-  "presets": "@babel/preset-env, @babel/preset-react"</span>
<span class="hljs-addition">+  "presets": ["@babel/preset-env", "@babel/preset-react"]</span>
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="plugin-preset-exports"></a><a href="#plugin-preset-exports" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugin/Preset Exports</h2>
<p>All plugins/presets should now export a function rather than an object for consistency [via <a href="https://github.com/babel/babel/pull/6494">babel/babel#6494</a>]. This will help us with caching.</p>
<h2><a class="anchor" aria-hidden="true" id="resolving-string-based-config-values"></a><a href="#resolving-string-based-config-values" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolving string-based config values</h2>
<p>In Babel 6, values passed to Babel directly (not from a config file), were resolved relative to the files being compiled, which led to lots of confusion.</p>
<p>In Babel 7, values are resolved consistently either relative to the config file that loaded them, or relative to the working directory.</p>
<p>For <code>presets</code> and <code>plugins</code> values, this change means that the CLI will behave nicely in cases such as</p>
<pre><code class="hljs css languages- bash">babel --presets @babel/preset-es2015 ../file.js
</code></pre>
<p>Assuming your <code>node_modules</code> folder is in <code>.</code>, in Babel 6 this would fail because the preset could not be found.</p>
<p>This change also affects <code>only</code> and <code>ignore</code> which will be expanded on next.</p>
<h2><a class="anchor" aria-hidden="true" id="path-based-only-and-ignore-patterns"></a><a href="#path-based-only-and-ignore-patterns" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Path-based <code>only</code> and <code>ignore</code> patterns</h2>
<p>In Babel 6, <code>only</code> and <code>ignore</code> were treated as a general matching string, rather than a filepath glob. This meant that for instance <code>*.foo.js</code> would match <code>./**/*.foo.js</code>, which was confusing and surprising to most users.</p>
<p>In Babel 7, these are now treated as path-based glob patterns which can either be relative or absolute paths. This means that if you were using these patterns, you'll probably need to at least add a <code>**/</code> prefix to them now to ensure that your patterns match deeply into directories.</p>
<p><code>only</code> and <code>ignore</code> patterns <em>do</em> still also work for directories, so you could also use <code>only: './tests'</code> to only compile files in your <code>tests</code> directory, with no need to use <code>**/*.js</code> to match all nested files.</p>
<h2><a class="anchor" aria-hidden="true" id="babel-s-cli-commands"></a><a href="#babel-s-cli-commands" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Babel's CLI commands</h2>
<p>The <code>--copy-files</code> argument for the <code>babel</code> command, which tells Babel to copy all files in a directory that Babel doesn't know how to handle, will also now copy files that failed an <code>only</code>/<code>ignore</code> check, where before it would silently skip all ignored files.</p>
<h3><a class="anchor" aria-hidden="true" id="babel-node"></a><a href="#babel-node" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@babel/node</code></h3>
<p>The <code>babel-node</code> command in Babel 6 was part of the <code>babel-cli</code> package. In Babel 7, this command has been split out into its own <code>@babel/node</code> package, so if you are using that command, you'll want to add this new dependency.</p>
<h2><a class="anchor" aria-hidden="true" id="babel-preset-stage-3"></a><a href="#babel-preset-stage-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@babel/preset-stage-3</code></h2>
<blockquote>
<p>Remove Stage 4 plugins from Stage 3 <a href="https://github.com/babel/babel/pull/5126">#5126</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-high-red.svg" alt="high"></p>
</blockquote>
<p>These plugins were moved into their yearly presets after moving to Stage 4:</p>
<ul>
<li><code>babel-plugin-syntax-trailing-function-commas</code> (<code>babel-preset-es2017</code>)</li>
<li><code>babel-plugin-transform-async-to-generator</code> (<code>babel-preset-es2017</code>)</li>
<li><code>babel-plugin-transform-exponentiation-operator</code> (<code>babel-preset-es2016</code>)</li>
</ul>
<p>Part of the reason we wanted to remove/deprecate stage presets in the first place are because of this issue. Whenever a proposal gets to Stage 4, it should technically be removed from the Stage 3 preset but it is a breaking change. Because all proposals are at risk (almost guranteed) to have breaking changes, it's the only parts of the Babel repo that would regularly have major version bumps (unless we do a 0.x versioning system which is basically the same thing). At the same time, we aren't doing the best job of signaling what each Stage means and the kinds of precautions you may want to take when using a proposal, especially in production.</p>
<hr>
<h2><a class="anchor" aria-hidden="true" id="spec-compliancy"></a><a href="#spec-compliancy" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Spec Compliancy</h2>
<h3><a class="anchor" aria-hidden="true" id="babel-plugin-proposal-object-rest-spread"></a><a href="#babel-plugin-proposal-object-rest-spread" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@babel/plugin-proposal-object-rest-spread</code></h3>
<blockquote>
<p>A trailing comma cannot come after a RestElement in objects <a href="https://github.com/babel/babylon/pull/290">#290</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-medium-yellow.svg" alt="medium"></p>
</blockquote>
<pre><code class="hljs css languages- diff">var {
<span class="hljs-deletion">-  ...y, // trailing comma is a SyntaxError</span>
<span class="hljs-addition">+  ...y</span>
} = { a: 1 };
</code></pre>
<hr>
<blockquote>
<p>Since Object Spread defines new propeties and <code>Object.assign</code> just sets them, Babel has changed the default behavior to be more spec compliant.</p>
</blockquote>
<ul>
<li><a href="https://github.com/babel/babel/blob/007bfb656502a44f6ab50cd64750cc4b38f9efff/packages/babel-helpers/src/helpers.js#L375">objectSpread helper function</a></li>
<li><a href="https://github.com/babel/babel/blob/007bfb656502a44f6ab50cd64750cc4b38f9efff/packages/babel-helpers/src/helpers.js#L357-L373">extends helper function</a></li>
</ul>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// input</span>
z = { x, ...y };
</code></pre>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// v7 default behavior: ["proposal-object-rest-spread"]</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_objectSpread</span>(<span class="hljs-params">target</span>) </span>{ ... }

z = _objectSpread({
  x
}, y);
</code></pre>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// Old v6 behavior: ["proposal-object-rest-spread", { "loose": true }]</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_extends</span>(<span class="hljs-params">target</span>) </span>{ ... }

z = _extends({
  x
}, y);
</code></pre>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// Substitute for Object.assign: ["proposal-object-rest-spread", { "loose": true, "useBuiltIns": true }]</span>
z = <span class="hljs-built_in">Object</span>.assign({
  x
}, y);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="babel-plugin-proposal-class-properties"></a><a href="#babel-plugin-proposal-class-properties" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@babel/plugin-proposal-class-properties</code></h3>
<p>The default behavior is changed to what was previously &quot;spec&quot; by default</p>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// input</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Bork</span> </span>{
  <span class="hljs-keyword">static</span> a = <span class="hljs-string">'foo'</span>;
  y;
}
</code></pre>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// v7 default behavior: ["@babel/plugin-proposal-class-properties"]</span>
<span class="hljs-keyword">var</span> Bork = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Bork</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">Object</span>.defineProperty(<span class="hljs-keyword">this</span>, <span class="hljs-string">"y"</span>, {
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">value</span>: <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>
  });
};

<span class="hljs-built_in">Object</span>.defineProperty(Bork, <span class="hljs-string">"a"</span>, {
  <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">value</span>: <span class="hljs-string">'foo'</span>
});
</code></pre>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// old v6 behavior: ["@babel/plugin-proposal-class-properties", { "loose": true }]</span>
<span class="hljs-keyword">var</span> Bork = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Bork</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.y = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
};

Bork.a = <span class="hljs-string">'foo'</span>;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="split-babel-plugin-transform-export-extensions-into-the-two-renamed-proposals"></a><a href="#split-babel-plugin-transform-export-extensions-into-the-two-renamed-proposals" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Split <code>@babel/plugin-transform-export-extensions</code> into the two renamed proposals</h3>
<p>This is a long time coming but this was finally changed.</p>
<p><code>@babel/plugin-proposal-export-default-from</code></p>
<pre><code class="hljs css languages- js"><span class="hljs-keyword">export</span> v <span class="hljs-keyword">from</span> <span class="hljs-string">'mod'</span>;
</code></pre>
<p><code>@babel/plugin-proposal-export-namespace-from</code></p>
<pre><code class="hljs css languages- js"><span class="hljs-keyword">export</span> * <span class="hljs-keyword">as</span> ns <span class="hljs-keyword">from</span> <span class="hljs-string">'mod'</span>;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="babel-plugin-transform-template-literals"></a><a href="#babel-plugin-transform-template-literals" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@babel/plugin-transform-template-literals</code></h3>
<blockquote>
<p>Template Literals Revision updated <a href="https://github.com/babel/babel/pull/5523">#5523</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg" alt="low"></p>
</blockquote>
<p>See the proposal for <a href="https://tc39.github.io/proposal-template-literal-revision/">Template Literals Revision</a>.</p>
<p>It cause Babel 6 to throw <code>Bad character escape sequence (5:6)</code>.</p>
<pre><code class="hljs css languages- js">tag<span class="hljs-string">`\unicode and \u{55}`</span>;
</code></pre>
<p>This has been fixed in Babel 7 and generates something like the following:</p>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// default</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_taggedTemplateLiteral</span>(<span class="hljs-params">strings, raw</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.freeze(<span class="hljs-built_in">Object</span>.defineProperties(strings, { <span class="hljs-attr">raw</span>: { <span class="hljs-attr">value</span>: <span class="hljs-built_in">Object</span>.freeze(raw) } })); }
<span class="hljs-keyword">var</span> _templateObject = <span class="hljs-comment">/*#__PURE__*/</span> _taggedTemplateLiteral([<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>], [<span class="hljs-string">"\\unicode and \\u{55}"</span>]);
tag(_templateObject);
</code></pre>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// loose mode</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_taggedTemplateLiteralLoose</span>(<span class="hljs-params">strings, raw</span>) </span>{ strings.raw = raw; <span class="hljs-keyword">return</span> strings; }
<span class="hljs-keyword">var</span> _templateObject = <span class="hljs-comment">/*#__PURE__*/</span> _taggedTemplateLiteralLoose([<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>], [<span class="hljs-string">"\\unicode and \\u{55}"</span>]);
tag(_templateObject);
</code></pre>
<hr>
<blockquote>
<p>Default to previous &quot;spec&quot; mode for regular template literals</p>
</blockquote>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// input</span>
<span class="hljs-string">`foo<span class="hljs-subst">${bar}</span>`</span>;
</code></pre>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// default v7 behavior: ["@babel/plugin-transform-template-literals"]</span>
<span class="hljs-string">"foo"</span>.concat(bar);
</code></pre>
<pre><code class="hljs css languages- js"><span class="hljs-comment">// old v6 behavior: ["@babel/plugin-transform-template-literals", { "loose": true }]</span>
<span class="hljs-string">"foo"</span> + bar;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="babel-plugin-proposal-decorators"></a><a href="#babel-plugin-proposal-decorators" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@babel/plugin-proposal-decorators</code></h3>
<p>In anticipation of the new decorators proposal implementation, we've decided to make it the new default behavior. This means that to continue using the current decorators syntax/behavior, you must set the <code>legacy</code> option as <code>true</code>.</p>
<pre><code class="hljs css languages- diff"> {
   "plugins": [
<span class="hljs-deletion">-    "@babel/plugin-proposal-decorators"</span>
<span class="hljs-addition">+    ["@babel/plugin-proposal-decorators", { "legacy": true }]</span>
   ]
 }
</code></pre>
<blockquote>
<p>NOTE: If you are using <code>@babel/preset-stage-0</code> or <code>@babel/preset-stage-1</code>, which include this plugin, you must pass them the <code>decoratorsLegacy</code> option.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="removed-babel-plugin-transform-class-constructor-call"></a><a href="#removed-babel-plugin-transform-class-constructor-call" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Removed <code>babel-plugin-transform-class-constructor-call</code></h3>
<blockquote>
<p>babel-plugin-transform-class-constructor-call has been removed <a href="https://github.com/babel/babel/pull/5119">#5119</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg" alt="low"></p>
</blockquote>
<p>TC39 decided to drop this proposal. You can move your logic into the constructor or into a static method.</p>
<p>See <a href="/docs/plugins/transform-class-constructor-call/">/docs/plugins/transform-class-constructor-call/</a> for more information.</p>
<pre><code class="hljs css languages- diff">  class Point {
    constructor(x, y) {
      this.x = x;
      this.y = y;
    }

<span class="hljs-deletion">-  call constructor(x, y) {</span>
<span class="hljs-addition">+  static secondConstructor(x, y) {</span>
      return new Point(x, y);
    }
  }

  let p1 = new Point(1, 2);
<span class="hljs-deletion">- let p2 = Point(3, 4);</span>
<span class="hljs-addition">+ let p2 = Point.secondConstructor(3, 4);</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="babel-plugin-async-to-generator"></a><a href="#babel-plugin-async-to-generator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@babel/plugin-async-to-generator</code></h3>
<p>We merged <code>babel-plugin-transform-async-to-module-method</code> into the regular async plugin by just making it an option.</p>
<pre><code class="hljs css languages- diff">{
  "plugins": [
<span class="hljs-deletion">-    ["@babel/transform-async-to-module-method"]</span>
<span class="hljs-addition">+    ["@babel/transform-async-to-generator", {</span>
<span class="hljs-addition">+      "module": "bluebird",</span>
<span class="hljs-addition">+      "method": "coroutine"</span>
<span class="hljs-addition">+    }]</span>
  ]
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="babel"></a><a href="#babel" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>babel</code></h2>
<blockquote>
<p>Dropping the <code>babel</code> package <a href="https://github.com/babel/babel/pull/5293">#5293</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg" alt="low"></p>
</blockquote>
<p>This package currently gives you an error message to install <code>babel-cli</code> instead in v6.
I think we can do something interesting with this name though.</p>
<h2><a class="anchor" aria-hidden="true" id="babel-register"></a><a href="#babel-register" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@babel/register</code></h2>
<blockquote>
<p><code>babel-core/register.js</code> has been removed <a href="https://github.com/babel/babel/pull/5132">#5132</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-low-yellowgreen.svg" alt="low"></p>
</blockquote>
<p>The deprecated usage of <code>babel-core/register</code> has been removed in Babel 7; instead use the standalone package <code>@babel/register</code>.</p>
<p>Install <code>@babel/register</code> as a new dependency:</p>
<pre><code class="hljs css languages- sh">npm install --save-dev @babel/register
</code></pre>
<p>Upgrading with Mocha:</p>
<pre><code class="hljs css languages- diff"><span class="hljs-deletion">- mocha --compilers js:babel-core/register</span>
<span class="hljs-addition">+ mocha --compilers js:@babel/register</span>
</code></pre>
<p><code>@babel/register</code> will also now only compile files in the current working directly (was done to fix issues with symlinking).</p>
<p><code>@babel/register</code> options are now replaced instead of merged</p>
<h2><a class="anchor" aria-hidden="true" id="babel-generator"></a><a href="#babel-generator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@babel/generator</code></h2>
<blockquote>
<p>Dropping the <code>quotes</code> option <a href="https://github.com/babel/babel/pull/5154">#5154</a>] <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-none-brightgreen.svg" alt="none"></p>
</blockquote>
<p>If you want formatting for compiled output you can use recast/prettier/escodegen/fork babel-generator.</p>
<p>This option was only available through <code>babel-generator</code> explicitly until v6.18.0 when we exposed <code>parserOpts</code> and <code>generatorOpts</code>. Because there was a bug in that release, no one should've used this option in Babel itself.</p>
<blockquote>
<p>Dropping the <code>flowUsesCommas</code> option <a href="https://github.com/babel/babel/pull/5123">#5123</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-none-brightgreen.svg" alt="none"></p>
</blockquote>
<p>Currently there are 2 supported syntaxes (<code>,</code> and <code>;</code>) in Flow Object Types.</p>
<p>This change just makes babel-generator output <code>,</code> instead of <code>;</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="babel-core"></a><a href="#babel-core" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@babel/core</code></h2>
<blockquote>
<p>Remove <code>babel-core/src/api/browser.js</code> <a href="https://github.com/babel/babel/pull/5124">#5124</a> <img src="https://img.shields.io/badge/risk%20of%20breakage%3F-none-brightgreen.svg" alt="none"></p>
</blockquote>
<p><code>babel-browser</code> was already removed in 6.0. If you need to use Babel in the browser or a non-Node environment, use <a href="https://github.com/babel/babel-standalone">babel-standalone</a>.</p>
<p>Babel will return <code>filename</code> as an absolute path <a href="https://github.com/babel/babel/pull/8044">#8044</a></p>
<h2><a class="anchor" aria-hidden="true" id="babel-preset-env"></a><a href="#babel-preset-env" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@babel/preset-env</code></h2>
<p><code>loose</code> mode will now automatically exclude the <code>typeof-symbol</code> transform (a lot of projects using loose mode were doing this).</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/en/next/learn">← Learn ES2015</a><a class="docs-next button" href="/docs/en/next/v7-migration-api">Upgrade to Babel 7 (API) →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#all-of-babel">All of Babel</a></li><li><a href="#yearly-preset-deprecations-blog-2017-12-27-nearing-the-70-releasehtml-deprecated-yearly-presets-eg-babel-preset-es20xx">Yearly Preset Deprecations</a></li><li><a href="#versioning-dependencies-blog-2017-12-27-nearing-the-70-releasehtml-peer-dependencies-integrations">Versioning/Dependencies</a></li><li><a href="#package-renames">Package Renames</a><ul class="toc-headings"><li><a href="#scoped-packages">Scoped Packages</a></li><li><a href="#switch-to-proposal-for-tc39-proposals-blog-2017-12-27-nearing-the-70-releasehtml-renames-proposal">Switch to <code>-proposal-</code> for TC39 Proposals</a></li><li><a href="#remove-the-year-from-package-names-blog-2017-12-27-nearing-the-70-releasehtml-renames-drop-the-year-from-the-plugin-name">Remove the year from package names</a></li></ul></li><li><a href="#use-strict-and-this-in-commonjs"><code>&quot;use strict&quot;</code> and <code>this</code> in CommonJS</a></li><li><a href="#separation-between-the-react-and-flow-presets">Separation between the React and Flow presets</a></li><li><a href="#option-parsing">Option parsing</a></li><li><a href="#plugin-preset-exports">Plugin/Preset Exports</a></li><li><a href="#resolving-string-based-config-values">Resolving string-based config values</a></li><li><a href="#path-based-only-and-ignore-patterns">Path-based <code>only</code> and <code>ignore</code> patterns</a></li><li><a href="#babel-s-cli-commands">Babel's CLI commands</a><ul class="toc-headings"><li><a href="#babel-node"><code>@babel/node</code></a></li></ul></li><li><a href="#babel-preset-stage-3"><code>@babel/preset-stage-3</code></a></li><li><a href="#spec-compliancy">Spec Compliancy</a><ul class="toc-headings"><li><a href="#babel-plugin-proposal-object-rest-spread"><code>@babel/plugin-proposal-object-rest-spread</code></a></li><li><a href="#babel-plugin-proposal-class-properties"><code>@babel/plugin-proposal-class-properties</code></a></li><li><a href="#split-babel-plugin-transform-export-extensions-into-the-two-renamed-proposals">Split <code>@babel/plugin-transform-export-extensions</code> into the two renamed proposals</a></li><li><a href="#babel-plugin-transform-template-literals"><code>@babel/plugin-transform-template-literals</code></a></li><li><a href="#babel-plugin-proposal-decorators"><code>@babel/plugin-proposal-decorators</code></a></li><li><a href="#removed-babel-plugin-transform-class-constructor-call">Removed <code>babel-plugin-transform-class-constructor-call</code></a></li><li><a href="#babel-plugin-async-to-generator"><code>@babel/plugin-async-to-generator</code></a></li></ul></li><li><a href="#babel"><code>babel</code></a></li><li><a href="#babel-register"><code>@babel/register</code></a></li><li><a href="#babel-generator"><code>@babel/generator</code></a></li><li><a href="#babel-core"><code>@babel/core</code></a></li><li><a href="#babel-preset-env"><code>@babel/preset-env</code></a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/babel.svg" alt="Babel" width="66" height="58"/></a><div><h5>文档</h5><a href="/docs/en/learn.html">学习 ES2015</a></div><div><h5>社区</h5><a href="/en/users.html">用户</a><a href="http://stackoverflow.com/questions/tagged/babeljs" rel="noopener noreferrer" target="_blank">Stack Overflow</a><a href="https://babeljs.slack.com/">Slack 通道</a><a href="https://twitter.com/babeljs" rel="noopener noreferrer" target="_blank">Twitter</a></div><div><h5>更多</h5><a href="/blog">博客</a><a href="https://github.com/babel">GitHub Org</a><a href="https://github.com/babel/babel">GitHub Repo</a><a href="https://github.com/babel/website">Website Repo</a><a href="https://old.babeljs.io"> 旧版网址 6.x </a><a href="http://henryzoo.com/babel.github.io">旧版网址 5.x </a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: 'd42906b043c5422ea07b44fd49c40a0d',
                indexName: 'babeljs',
                inputSelector: '#search_input_react'
              });
            </script></body></html>